<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Generating the `NAMESPACE` file with roxygen2.
">
<title>Managing imports and exports • roxygen2</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.7/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.7/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Managing imports and exports">
<meta property="og:description" content="Generating the `NAMESPACE` file with roxygen2.
">
<meta property="og:image" content="https://roxygen2.r-lib.org/logo.png">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script defer data-domain="roxygen2.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">roxygen2</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">7.2.3.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/roxygen2.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Documentation</h6>
    <a class="dropdown-item" href="../articles/rd.html">Documenting functions</a>
    <a class="dropdown-item" href="../articles/rd-other.html">Documenting other objects</a>
    <a class="dropdown-item" href="../articles/reuse.html">Reusing documentation</a>
    <a class="dropdown-item" href="../articles/index-crossref.html">Indexing and cross-references</a>
    <a class="dropdown-item" href="../articles/rd-formatting.html">(R)Markdown support</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>NAMESPACE</h6>
    <a class="dropdown-item" href="../articles/namespace.html">Managing imports and exports</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Developer</h6>
    <a class="dropdown-item" href="../articles/extending.html">Extending roxygen2</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Releases</h6>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2022/05/roxygen2-7-2-0/">Version 7.2.0</a>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/03/roxygen2-7-1-0/">Version 7.1.0</a>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2019/11/roxygen2-7-0-0/">Version 7.0.0</a>
    <a class="external-link dropdown-item" href="https://blog.rstudio.com/2017/02/01/roxygen2-6-0-0/">Version 6.0.0</a>
    <a class="external-link dropdown-item" href="https://blog.rstudio.com/2015/10/29/roxygen2-5-0-0/">Version 5.0.0</a>
    <a class="external-link dropdown-item" href="https://blog.rstudio.com/2014/05/19/roxygen2-4-0-1/">Version 4.0.1</a>
    <a class="external-link dropdown-item" href="https://blog.rstudio.com/2013/12/09/roxygen2-3-0-0/">Version 3.0.0</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/r-lib/roxygen2/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Managing imports and exports</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/roxygen2/blob/HEAD/vignettes/namespace.Rmd" class="external-link"><code>vignettes/namespace.Rmd</code></a></small>
      <div class="d-none name"><code>namespace.Rmd</code></div>
    </div>

    
    
<p>The package <code>NAMESPACE</code> is one of the most confusing parts
of building a package. roxygen2 aims to make it as easy as possible to
build a package that is a well-behaved member of the R ecosystem. This
is a little frustrating at first, but soon becomes second-nature.</p>
<div class="section level2">
<h2 id="exports">Exports<a class="anchor" aria-label="anchor" href="#exports"></a>
</h2>
<p>For a function to be usable outside your package, you must
<strong>export</strong> it. By default roxygen2 doesn’t export anything
from your package. If you want an object to be publicly available, you
must explicitly tag it with <code>@export</code>.</p>
<p>Use the following guidelines to decide what to export:</p>
<ul>
<li><p><strong>Functions</strong>: export functions that you want to
make available. Exported functions must be documented, and you must be
cautious when changing their interface.</p></li>
<li><p><strong>Datasets</strong>: all datasets are publicly available.
They exist outside of the package namespace and must not be
exported.</p></li>
<li><p><strong>S3 classes</strong>: if you want others to be able to
create instances of the class <code>@export</code> the constructor
function.</p></li>
<li><p><strong>S3 generics</strong>: the generic is a function, so
<code>@export</code> if you want it to be usable outside the
package.</p></li>
<li><p><strong>S3 methods</strong>: every S3 method <em>must</em> be
exported, even if the generic is not. Otherwise, the S3 method table
will not be generated correctly and internal generics will not find the
correct method. See below for instructions on how to export a method for
a generic in a suggested package.</p></li>
<li><p><strong>S4 classes</strong>: export S4 classes if you want others
to be able to extend them.</p></li>
<li><p><strong>S4 generics:</strong> <code>@export</code> if you want
the generic to be publicly usable.</p></li>
<li><p><strong>S4 methods</strong>: you only need to
<code>@export</code> methods for generics in other packages.</p></li>
</ul>
<div class="section level3">
<h3 id="s3-methods-for-generics-in-suggested-packages">S3 methods for generics in suggested packages<a class="anchor" aria-label="anchor" href="#s3-methods-for-generics-in-suggested-packages"></a>
</h3>
<p><code>@exportS3Method</code> tag allows you to generate
<code>S3method()</code> namespace directives. Its primary use is for
“delayed” method registration, which allows you to define methods for
generics found in suggested packages (R &gt;= 3.6). For example,</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @exportS3Method pkg::generic</span></span>
<span><span class="va">generic.foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>will generate</p>
<pre><code><span><span class="fu">S3method</span><span class="op">(</span><span class="fu">pkg</span><span class="fu">::</span><span class="va">generic</span>, <span class="va">foo</span><span class="op">)</span></span></code></pre>
<p>Which will cause the method to be registered only when pkg is
loaded.</p>
</div>
<div class="section level3">
<h3 id="manual-exports">Manual exports<a class="anchor" aria-label="anchor" href="#manual-exports"></a>
</h3>
<p>If <code>@export</code> does not automatically generate the correct
directive when, you can use one of the tags below to exercise greater
control:</p>
<ul>
<li>
<code>@export foo</code> generates <code>export(foo)</code>
</li>
<li>
<code>@exportS3Method generic method</code> generates
<code>S3method(generic, method)</code>
</li>
<li>
<code>@exportClass foo</code> generates
<code>exportClasses(foo)</code>
</li>
<li>
<code>@exportMethod foo</code> generates
<code>exportMethods(foo)</code>
</li>
<li>
<code>@exportPattern foo</code> generates
<code>exportPattern(foo)</code>
</li>
</ul>
<p>For even more specialised cases you can use
<code>@rawNamespace code</code> which inserts <code>code</code>
literally into the <code>NAMESPACE</code>. If you need to automate this,
<code>@evalNamespace fun()</code> will evaluate <code>fun()</code> in
the package environment and insert the results into
<code>NAMESPACE</code>. Because <code>evalNamespace()</code> is run in
the package environment, it can only generate exports, not imports.</p>
</div>
</div>
<div class="section level2">
<h2 id="imports">Imports<a class="anchor" aria-label="anchor" href="#imports"></a>
</h2>
<p>The <code>NAMESPACE</code> also controls which functions from other
packages are made available to your package.</p>
<div class="section level3">
<h3 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a>
</h3>
<p>If you are using just a few functions from another package, we
recommending adding the package to the <code>Imports:</code> field of
the <code>DESCRIPTION</code> file and calling the functions explicitly
using <code>::</code>, e.g., <code>pkg::fun()</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_function</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">pkg</span><span class="fu">::</span><span class="fu">fun</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">*</span> <span class="va">y</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>If the repetition of the package name becomes annoying you can
<code>@importFrom</code> and drop the <code>::</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @importFrom pkg fun </span></span>
<span><span class="va">my_function</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">fun</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">*</span> <span class="va">y</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Imports affect every function in a package, so it’s common to collect
them in a central place, like <code>{packagename}-package.R</code>. This
is automated by <code>usethis::use_import_from()</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @importFrom pkg fun1 fun2</span></span>
<span><span class="co">#' @importFrom pkg2 fun3</span></span>
<span><span class="co">#' @importFrom pkg3 fun4</span></span>
<span><span class="cn">NULL</span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>Note the use of <code>NULL</code> here: you must provide something
for roxygen2 to document, so we use <code>NULL</code> as place
holder.</p>
<p>It is possible, but not generally recommended to import all functions
from a package with <code>@import package</code>. This is risky if you
import functions from more than one package, because while it might be
ok today, in the future the packages might end up with a function having
the same name, and your users will get a warning every time your package
is loaded.</p>
</div>
<div class="section level3">
<h3 id="s3">S3<a class="anchor" aria-label="anchor" href="#s3"></a>
</h3>
<p>S3 generics are just functions, so the same rules for functions
apply. S3 methods always accompany the generic, so as long as you can
access the generic (either implicitly or explicitly), the methods will
also be available. In other words, you don’t need to do anything special
for S3 methods. As long as you’ve imported the generic, all the methods
will also be available.</p>
</div>
<div class="section level3">
<h3 id="s4">S4<a class="anchor" aria-label="anchor" href="#s4"></a>
</h3>
<ul>
<li>To use classes defined in another package,
place <code>@importClassesFrom package ClassA ClassB ...</code> next to
the classes that inherit from the imported classes, or next to the
methods that implement a generic for the imported classes.</li>
<li>To use generics defined in another package,
place <code>@importMethodsFrom package GenericA GenericB ...</code> next
to the methods that use the imported generics.</li>
</ul>
</div>
<div class="section level3">
<h3 id="compiled-code">Compiled code<a class="anchor" aria-label="anchor" href="#compiled-code"></a>
</h3>
<p>To import compiled code from another package, use
<code>@useDynLib</code></p>
<ul>
<li><p><code>@useDynLib package</code> imports all compiled
functions.</p></li>
<li><p><code>@useDynLib package routinea routineb</code> imports
selected compiled functions.</p></li>
<li><p>Any <code>@useDynLib</code> specification containing a comma,
e.g. <code>@useDynLib mypackage, .registration = TRUE</code> will be
inserted as is into the the NAMESPACE,
e.g. <code>useDynLib(mypackage, .registration = TRUE)</code></p></li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="http://hadley.nz" class="external-link">Hadley Wickham</a>, Peter Danenberg, <a href="https://github.com/gaborcsardi" class="external-link">Gábor Csárdi</a>, Manuel Eugster, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

  </div></footer>
</body>
</html>
